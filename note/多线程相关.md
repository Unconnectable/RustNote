## Rust 管理概念综合表格

| 类型/概念          | 核心功能                             | 线程安全( `Send`/ `Sync`)    | 典型用例                                              |
| ------------------ | ------------------------------------ | ---------------------------- | ----------------------------------------------------- |
| **`Cell<T>`**      | **单线程**内部可变性(仅限`Copy`类型) | 否                           | 在单线程中,对`Copy`类型的资料进行简单的内部修改       |
| **`RefCell<T>`**   | **单线程**内部可变性(执行时检查)     | 否                           | 在单线程中,对非`Copy`类型的资料进行内部可变借用       |
| **`Rc<T>`**        | **单线程**共享所有权                 | 否                           | 在单线程中,多个部分需要共享资料的所有权(如树状结构)   |
| **`Arc<T>`**       | **多线程**共享所有权(`Atomic`)       | **是**                       | 在多线程中,多个线程需要共享资料的所有权               |
| **`Mutex<T>`**     | 多线程互斥可变性                     | **是**                       | 在多线程中,安全地修改共享资料                         |
| **`Weak<T>`**      | 解决循环引用                         | 取决于其`Rc`或`Arc`          | 在树状结构中,子节点指向父节点,避免记忆体泄漏          |
| **`Box<T>`**       | 堆上所有权(单独拥有)                 | 是                           | 将大型资料或递归类型存储在堆上,或作为简单的拥有型指标 |
| **`&`和`&mut`**    | 引用和借用                           | 是                           | 在不转移所有权的情况下,安全地读取或修改资料           |
| **`Lifetimes`**    | 编译时确保引用有效性                 | N/A (编译器机制)             | 确保引用不会比其指向的资料活得更久,防止悬垂指针       |
| **`Raw Pointers`** | `unsafe`的裸指标                     | N/A (不受 Rust 安全系统管理) | 与 C 语言介面(FFI)交互,或手动管理记忆体的底层实现     |
| **`RwLock<T>`**    | **多线程**读写锁                     | **是**                       | 读操作远多于写操作的多线程场景                        |
